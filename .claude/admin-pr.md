# 관리자 페이지 구현

- 기존 AI 패널에 있던 요약 생성 기능 및 추천 게시글을 ADMIN 페이지에서 관리하도록 하는 구현이다.
- 또한 게시글 군집화 역시 ADMIN에서 할 수 있도록 수정하였다. (단 기존 군집을 삭제하진 않는다. 삭제에 대한 API는 새로 구현해야 한다.)

## API 변경사항

주요 변경 사항은 아래와 같다

1. 추천 게시글 생성 API들은 RLS 정책을 충족하도록 if문과 중복 방지 로직들이 추가되었다.
2. 요약 생성은 요약과 게시글을 1:1 참조하도록 테이블 구조를 변경하고 upsert 방식으로 관리하도록 변경되었다.

## 관리자 페이지 SSR 로직

- `hooks/use-revalidator.ts` 훅을 추가하였다. 해당 훅에서는 tags를 문자열 배열로 받아 서버에 revalidateTags 요청을 보낸 후, route.refresh요청을 보낸다. 이를 통해 클라이언트 상태를 유지하면서 변경된 데이터를 반영할 수 있다. (단, zustand를 통해 서버 상태를 저장한 경우에는 zustand 상태가 초기화 될 수 있다.)

- 클라이언트 상태는 `providers/admin-table-store-provider.tsx`를 통해 zustand로 관리한다. 주로 필터에 관한 상태가 정의되어 있다.
